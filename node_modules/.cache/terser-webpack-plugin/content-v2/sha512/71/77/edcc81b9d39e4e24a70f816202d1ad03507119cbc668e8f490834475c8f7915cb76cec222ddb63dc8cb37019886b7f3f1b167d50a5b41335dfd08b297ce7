{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{656:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"Treatments\",function(){return h});var s=n(0),a=n(6),c=n(3),l=n(10),i=n(4),r=n(2),d=n(8),m=n(182),o=n(21),p=n(98),b=n(177),u=n(1);let h=class extends u.Component{constructor(){super(...arguments),this.selectedID=c.w.currentLocation.split(\"/\")[1]}get canEdit(){return c.A.currentUser.canEditTreatments}get selectedIndex(){return l.Fb.list.findIndex(e=>e._id===this.selectedID)}get selectedTreatment(){return l.Fb.list[this.selectedIndex]}render(){return u.createElement(\"div\",{className:\"tc-pg p-15 p-l-10 p-r-10\"},u.createElement(a.d,{onDelete:this.canEdit?e=>{l.Fb.deleteModal(e)}:void 0,commands:this.canEdit?[{key:\"addNew\",title:\"Add new\",name:Object(c.z)(\"Add new\"),onClick:()=>{const e=new l.H;l.Fb.list.push(e),this.selectedID=e._id},iconProps:{iconName:\"Add\"}}]:[],heads:[Object(c.z)(\"Treatment\"),Object(c.z)(\"Expenses/unit\"),Object(c.z)(\"Done appointments\"),Object(c.z)(\"Upcoming appointments\")],rows:l.Fb.list.map(e=>{const t=(new Date).getTime();let n=0,s=0;const i=l.K.list;for(let a=0;a<i.length;a++){const c=i[a];c.treatmentID===e._id&&(c.date>t&&s++,c.isDone&&n++)}return{id:e._id,searchableString:e.searchableString,cells:[{dataValue:e.type,component:u.createElement(a.j,{text:e.type,subText:`${Object(c.z)(\"Expenses\")}: ${l.xb.getSetting(\"currencySymbol\")}${e.expenses} ${Object(c.z)(\"per unit\")}`}),onClick:()=>{this.selectedID=e._id},className:\"no-label\"},{dataValue:e.expenses,component:u.createElement(\"span\",null,l.xb.getSetting(\"currencySymbol\"),e.expenses),className:\"hidden-xs\"},{dataValue:n,component:u.createElement(\"span\",null,n,\" \",Object(c.z)(\"done\")),className:\"hidden-xs\"},{dataValue:s,component:u.createElement(\"span\",null,s,\" \",Object(c.z)(\"upcoming\")),className:\"hidden-xs\"}]}}),maxItemsOnLoad:20}),this.selectedTreatment?u.createElement(m.a,{isOpen:!!this.selectedTreatment,type:o.a.medium,closeButtonAriaLabel:\"Close\",isLightDismiss:!0,onDismiss:()=>{this.selectedID=\"\"},onRenderNavigation:()=>u.createElement(a.k,{className:\"panel-heading\"},u.createElement(a.c,{span:20},this.selectedTreatment?u.createElement(a.j,{text:this.selectedTreatment.type,subText:`${Object(c.z)(\"Expenses\")}: ${l.xb.getSetting(\"currencySymbol\")}${this.selectedTreatment.expenses} ${Object(c.z)(\"per unit\")}`}):u.createElement(\"p\",null)),u.createElement(a.c,{span:4,className:\"close\"},u.createElement(p.a,{iconProps:{iconName:\"cancel\"},onClick:()=>{this.selectedID=\"\"}})))},u.createElement(\"div\",{className:\"treatment-editor\"},u.createElement(a.l,{title:Object(c.z)(\"Treatment Details\")},u.createElement(\"div\",{className:\"treatment-input\"},u.createElement(b.a,{label:Object(c.z)(\"Treatment title\"),value:this.selectedTreatment.type,onChange:(e,t)=>l.Fb.list[this.selectedIndex].type=t,disabled:!this.canEdit}),u.createElement(b.a,{label:Object(c.z)(\"Treatment expenses (per unit)\"),type:\"number\",value:this.selectedTreatment.expenses.toString(),onChange:(e,t)=>l.Fb.list[this.selectedIndex].expenses=Object(i.r)(t),prefix:l.xb.getSetting(\"currencySymbol\"),disabled:!this.canEdit}))))):\"\")}};s.c([r.k],h.prototype,\"selectedID\",void 0),s.c([r.d],h.prototype,\"canEdit\",null),s.c([r.d],h.prototype,\"selectedIndex\",null),s.c([r.d],h.prototype,\"selectedTreatment\",null),h=s.c([d.a],h)}}]);","extractedComments":[]}