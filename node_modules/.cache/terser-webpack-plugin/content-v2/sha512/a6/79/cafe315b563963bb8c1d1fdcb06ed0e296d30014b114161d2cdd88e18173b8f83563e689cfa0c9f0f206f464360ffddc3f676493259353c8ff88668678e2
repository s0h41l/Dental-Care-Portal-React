{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{194:function(e,t,a){\"use strict\";var i;a.d(t,\"a\",function(){return i}),function(e){e[e.normal=0]=\"normal\",e[e.largeHeader=1]=\"largeHeader\",e[e.close=2]=\"close\"}(i||(i={}))},197:function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return h});var i=a(0),s=a(6),o=a(2),n=a(8),r=a(175),l=a(663),d=a(177),c=a(98),p=a(249),m=a(1);let h=class extends m.Component{constructor(){super(...arguments),this.valueToAdd=\"\",this.expandIndex=-1}addItem(){this.valueToAdd.replace(/\\W/,\"\").length&&(this.props.value.push(this.valueToAdd),this.valueToAdd=\"\",(this.props.onChange||(()=>{}))(this.props.value))}render(){return m.createElement(\"div\",{className:\"elc-c\",style:this.props.style},m.createElement(\"div\",{className:\"editable-list\"},m.createElement(\"div\",{className:\"input\",style:this.props.value.length?{}:{borderBottom:\"none\"}},m.createElement(s.k,null,m.createElement(s.c,{xs:this.props.disabled?24:20,sm:this.props.disabled?24:21},m.createElement(\"input\",{className:\"new-item-input\",style:this.props.value.length>0?void 0:{borderBottom:\"none\"},placeholder:this.props.label||void 0,onKeyDown:e=>{13===e.keyCode&&(this.addItem(),e.preventDefault())},onKeyUp:e=>{13===e.keyCode&&(this.addItem(),e.preventDefault())},value:this.valueToAdd,onChange:e=>this.valueToAdd=e.target.value,disabled:this.props.disabled})),m.createElement(s.c,{xs:4,sm:3,style:{textAlign:\"right\"}},this.props.disabled?\"\":m.createElement(r.a,{className:\"input-icon\",iconName:\"Add\",onClick:()=>{this.addItem()}})))),this.props.value.length?m.createElement(\"div\",{className:\"items\"},m.createElement(l.a,{compact:!0,items:[...this.props.value.map((e,t)=>[m.createElement(\"div\",{id:t.toString()},this.expandIndex===t?m.createElement(\"div\",{className:\"list-item\"},m.createElement(d.a,{multiline:!0,value:e,onBlur:()=>this.expandIndex=-1,disabled:this.props.disabled,autoFocus:!0,onChange:(e,a)=>{this.props.value[t]=a,(this.props.onChange||(()=>{}))(this.props.value)}})):m.createElement(\"div\",{className:\"el-expander\",onClick:()=>{this.expandIndex=t}},e.length>30?e.substr(0,25)+\"...\":e),m.createElement(c.a,{className:\"delete\",iconProps:{iconName:\"trash\"},onClick:e=>{this.expandIndex=-1,this.props.value.splice(t,1),(this.props.onChange||(()=>{}))(this.props.value)},disabled:this.props.disabled}))])],isHeaderVisible:!1,selectionMode:p.b.none})):\"\"))}};i.c([o.k],h.prototype,\"valueToAdd\",void 0),i.c([o.k],h.prototype,\"expandIndex\",void 0),h=i.c([n.a],h)},207:function(e,t,a){\"use strict\";var i=a(156),s=a(0),o=a(1),n=a(157),r=a(65),l=Object(n.a)(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.d(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.styles,i=e.theme;return this._classNames=l(a,{theme:i,className:t}),o.createElement(\"div\",{className:this._classNames.actions},o.createElement(\"div\",{className:this._classNames.actionsRight},this._renderChildrenAsActions()))},t.prototype._renderChildrenAsActions=function(){var e=this;return o.Children.map(this.props.children,function(t){return t?o.createElement(\"span\",{className:e._classNames.action},t):null})},t}(r.a),c=a(9),p={actions:\"ms-Dialog-actions\",action:\"ms-Dialog-action\",actionsRight:\"ms-Dialog-actionsRight\"};a.d(t,\"a\",function(){return m});var m=Object(i.a)(d,function(e){var t=e.className,a=e.theme,i=Object(c.u)(p,a);return{actions:[i.actions,{position:\"relative\",width:\"100%\",minHeight:\"24px\",lineHeight:\"24px\",margin:\"20px 0 0\",fontSize:\"0\",selectors:{\".ms-Button\":{lineHeight:\"normal\"}}},t],action:[i.action],actionsRight:[i.actionsRight,{textAlign:\"right\",marginRight:\"-4px\",fontSize:\"0\",selectors:{$action:{margin:\"0 4px\"}}}]}},void 0,{scope:\"DialogFooter\"})},262:function(e,t,a){\"use strict\";var i=a(156),s=a(0),o=a(1),n=a(157),r=a(46),l=a(65),d=a(194),c=a(184),p=a(32),m=a(98),h=a(207),u=Object(n.a)(),b=o.createElement(h.a,null).type,g=function(e){function t(t){return e.call(this,t)||this}return s.d(t,e),t.prototype.render=function(){var e,t=this.props,a=t.showCloseButton,i=t.className,n=t.closeButtonAriaLabel,r=t.onDismiss,l=t.subTextId,c=t.subText,p=t.titleId,h=t.title,b=t.type,g=t.styles,v=t.theme,y=u(g,{theme:v,className:i,isLargeHeader:b===d.a.largeHeader,isClose:b===d.a.close}),x=this._groupChildren();return c&&(e=o.createElement(\"p\",{className:y.subText,id:l},c)),o.createElement(\"div\",{className:y.content},o.createElement(\"div\",{className:y.header},o.createElement(\"p\",{className:y.title,id:p,role:\"heading\",\"aria-level\":2},h),o.createElement(\"div\",{className:y.topButton},this.props.topButtonsProps.map(function(e,t){return o.createElement(m.a,s.a({key:e.uniqueId||t},e))}),(b===d.a.close||a&&b!==d.a.largeHeader)&&o.createElement(m.a,{className:y.button,iconProps:{iconName:\"Cancel\"},ariaLabel:n,onClick:r}))),o.createElement(\"div\",{className:y.inner},o.createElement(\"div\",{className:y.innerContent},e,x.contents),x.footers))},t.prototype._groupChildren=function(){var e={footers:[],contents:[]};return o.Children.map(this.props.children,function(t){\"object\"==typeof t&&null!==t&&t.type===b?e.footers.push(t):e.contents.push(t)}),e},t.defaultProps={showCloseButton:!1,className:\"\",topButtonsProps:[],closeButtonAriaLabel:\"Close\"},t=s.c([p.b],t)}(l.a),v=a(9),y={contentLgHeader:\"ms-Dialog-lgHeader\",close:\"ms-Dialog--close\",subText:\"ms-Dialog-subText\",header:\"ms-Dialog-header\",headerLg:\"ms-Dialog--lgHeader\",button:\"ms-Dialog-button ms-Dialog-button--close\",inner:\"ms-Dialog-inner\",content:\"ms-Dialog-content\",title:\"ms-Dialog-title\"},x=Object(i.a)(g,function(e){var t=e.className,a=e.theme,i=e.isLargeHeader,s=e.isClose,o=e.hidden,n=e.isMultiline,r=a.palette,l=a.fonts,d=Object(v.u)(y,a);return{content:[i&&d.contentLgHeader,s&&d.close,{flexGrow:1,overflowY:\"hidden\"},t],subText:[d.subText,i?l.medium:l.small,{margin:\"0 0 20px 0\",paddingTop:\"8px\",color:r.neutralPrimary,lineHeight:\"1.5\",wordWrap:\"break-word\",fontWeight:v.e.semilight}],header:[d.header,{position:\"relative\",width:\"100%\",boxSizing:\"border-box\"},i&&[d.headerLg,{backgroundColor:r.themePrimary}],s&&d.close],button:[d.button,o&&{selectors:{\".ms-Icon.ms-Icon--Cancel\":{color:r.neutralSecondary,fontSize:\"16px\"}}}],inner:[d.inner,{padding:n?\"0 20px 20px\":\"0 28px 20px\"}],innerContent:[d.content,{position:\"relative\",width:\"100%\",selectors:{\".ms-Button.ms-Button--compount\":{marginBottom:\"20px\",selectors:{\"&:last-child\":{marginBottom:\"0\"}}}}},t],title:[d.title,{color:r.neutralPrimary,margin:\"0\",padding:\"20px 36px 20px 28px\"},l.xLarge,i&&[{color:r.white,marginBottom:\"8px\",padding:\"26px 28px 28px\"},l.xxLarge],n&&l.xxLarge],topButton:[{display:\"flex\",flexDirection:\"row\",flexWrap:\"nowrap\",position:\"absolute\",top:\"0\",right:\"0\",padding:\"12px 12px 0 0\",selectors:{\"> *\":{flex:\"0 0 auto\"}}}]}},void 0,{scope:\"DialogContent\"}),C=Object(n.a)(),E={isDarkOverlay:!1,isBlocking:!1,className:\"\",containerClassName:\"\",topOffsetFixed:!1},f={type:d.a.normal,className:\"\",topButtonsProps:[]},N=function(e){function t(t){var a=e.call(this,t)||this;return a._getSubTextId=function(){var e=a.props,t=e.ariaDescribedById,i=e.modalProps,s=e.dialogContentProps,o=e.subText,n=t||i&&i.subtitleAriaId;return n||(n=(o||s&&s.subText)&&a._defaultSubTextId),n},a._getTitleTextId=function(){var e=a.props,t=e.ariaLabelledById,i=e.modalProps,s=e.dialogContentProps,o=e.title,n=t||i&&i.titleAriaId;return n||(n=(o||s&&s.title)&&a._defaultTitleTextId),n},a._id=Object(r.c)(\"Dialog\"),a._defaultTitleTextId=a._id+\"-title\",a._defaultSubTextId=a._id+\"-subText\",a._warnDeprecations({isOpen:\"hidden\",type:\"dialogContentProps.type\",subText:\"dialogContentProps.subText\",contentClassName:\"dialogContentProps.className\",topButtonsProps:\"dialogContentProps.topButtonsProps\",className:\"modalProps.className\",isDarkOverlay:\"modalProps.isDarkOverlay\",isBlocking:\"modalProps.isBlocking\",containerClassName:\"modalProps.containerClassName\",onDismissed:\"modalProps.onDismissed\",onLayerDidMount:\"modalProps.layerProps.onLayerDidMount\",ariaDescribedById:\"modalProps.subtitleAriaId\",ariaLabelledById:\"modalProps.titleAriaId\"}),a}return s.d(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.containerClassName,i=e.contentClassName,n=e.elementToFocusOnDismiss,r=e.firstFocusableSelector,l=e.forceFocusInsideTrap,d=e.styles,p=e.hidden,m=e.ignoreExternalFocusing,h=e.isBlocking,u=e.isClickableOutsideFocusTrap,b=e.isDarkOverlay,g=e.isOpen,v=e.onDismiss,y=e.onDismissed,N=e.onLayerDidMount,O=e.responsiveMode,D=e.subText,j=e.theme,T=e.title,I=e.topButtonsProps,P=e.type,k=e.minWidth,z=e.maxWidth,w=e.modalProps,B=s.a({},w?w.layerProps:{onLayerDidMount:N});N&&!B.onLayerDidMount&&(B.onLayerDidMount=N);var F=s.a({},E,w,{layerProps:B}),S=s.a({},f,this.props.dialogContentProps),A=C(d,{theme:j,className:t||F.className,containerClassName:a||F.containerClassName,hidden:p,dialogDefaultMinWidth:k,dialogDefaultMaxWidth:z});return o.createElement(c.a,s.a({elementToFocusOnDismiss:n,firstFocusableSelector:r,forceFocusInsideTrap:l,ignoreExternalFocusing:m,isClickableOutsideFocusTrap:u,onDismissed:y,responsiveMode:O},F,{isDarkOverlay:void 0!==b?b:F.isDarkOverlay,isBlocking:void 0!==h?h:F.isBlocking,isOpen:void 0!==g?g:!p,className:A.root,containerClassName:A.main,onDismiss:v||F.onDismiss,subtitleAriaId:this._getSubTextId(),titleAriaId:this._getTitleTextId()}),o.createElement(x,s.a({titleId:this._defaultTitleTextId,subTextId:this._defaultSubTextId,title:T,subText:D,showCloseButton:void 0!==h?!h:!F.isBlocking,topButtonsProps:I||S.topButtonsProps,type:void 0!==P?P:S.type,onDismiss:v||S.onDismiss,className:i||S.className},S),this.props.children))},t.defaultProps={hidden:!0},t=s.c([p.b],t)}(l.a),O={root:\"ms-Dialog\"};a.d(t,\"a\",function(){return D});var D=Object(i.a)(N,function(e){var t,a=e.className,i=e.containerClassName,s=e.dialogDefaultMinWidth,o=void 0===s?\"288px\":s,n=e.dialogDefaultMaxWidth,r=void 0===n?\"340px\":n,l=e.hidden,d=e.theme;return{root:[Object(v.u)(O,d).root,d.fonts.medium,a],main:[{width:o,outline:\"3px solid transparent\",selectors:(t={},t[\"@media (min-width: \"+v.m+\"px)\"]={width:\"auto\",maxWidth:r,minWidth:o},t)},!l&&{display:\"flex\"},i]}},void 0,{scope:\"Dialog\"})},528:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"OrthoRecordsPanel\",function(){return T});var i=a(0),s=a(6),o=a(3),n=a(10),r=a(4),l=a(197),d=a(43),c=a(2),p=a(8),m=a(179),h=a(14),u=a(663),b=a(249),g=a(299),v=a(173),y=a(171),x=a(98),C=a(262),E=a(177),f=a(175),N=a(170),O=a(62),D=a(1);const j=[\"Frontal\",\"Right Buccal\",\"Left Buccal\",\"Palatal\",\"Lingual\"];let T=class extends D.Component{constructor(){super(...arguments),this.selectedPhotoId=\"\",this.zoomedColumn=-1,this.expandedField=\"\",this.uploadingPhotoID=\"\",this.imagesTable={},this.showGrid=!1,this.overlayWithPrev=!1,this.overlayWithNext=!1,this.openCallouts=[],this.stopObservation=function(){}}get canEdit(){return o.A.currentUser.canEditOrtho}get dates(){return this.props.orthoCase.patient?this.props.orthoCase.patient.appointments.map(e=>({date:e.date,treatmentType:(e.treatment||{type:\"\"}).type})).sort((e,t)=>t.date-e.date):[]}get allImages(){return this.props.orthoCase.visits.reduce((e,t)=>(t.photos.map(e=>e.photoID).forEach(t=>{t&&e.push(t)}),e),[])}componentDidMount(){this.allImages.forEach(e=>i.b(this,void 0,void 0,function*(){yield this.addImage(e)})),this.stopObservation=this.observe()}componentWillUnmount(){this.stopObservation()}addImage(e){return i.b(this,void 0,void 0,function*(){this.imagesTable[e]=\"\";const t=yield o.n.get(e);this.imagesTable[e]=t})}removeImage(e){return i.b(this,void 0,void 0,function*(){yield o.n.remove(e),delete this.imagesTable[e]})}observe(){return Object(c.l)(this.props.orthoCase,e=>{if(\"visits\"===e.name){const e=Object(d.diff)(Object.keys(this.imagesTable).sort(),this.allImages.sort());e.added.forEach(e=>{this.addImage(e)}),e.removed.forEach(e=>{this.removeImage(e)})}})}render(){return D.createElement(\"div\",{className:\"ortho-records\"},D.createElement(s.l,{title:Object(o.z)(\"Problems\")},0===this.props.orthoCase.computedProblems.length&&0===this.props.orthoCase.problemsList.length?D.createElement(m.a,{messageBarType:h.a.warning},Object(o.z)(\"This patient does not seem to have any problems or concerns, have you filled the case sheet?\")):D.createElement(u.a,{compact:!0,items:[...[...this.props.orthoCase.computedProblems,...this.props.orthoCase.problemsList.map(e=>Object(o.z)(\"Patient concern\")+\": \"+e)].map((e,t)=>[`${t+1}. ${e}`])],isHeaderVisible:!1,selectionMode:b.b.none})),D.createElement(s.l,{title:Object(o.z)(\"Treatment Plan\")},this.props.orthoCase.treatmentPlan_appliance.length?\"\":D.createElement(m.a,{messageBarType:h.a.warning},Object(o.z)(\"A treatment plan must be before starting the treatment\")),D.createElement(l.a,{label:Object(o.z)(\"Add Plan\"),value:this.props.orthoCase.treatmentPlan_appliance,onChange:e=>{this.props.orthoCase.treatmentPlan_appliance=e,this.tu()},disabled:!this.canEdit})),D.createElement(s.l,{title:Object(o.z)(\"Started/Finished\")},D.createElement(s.k,{gutter:12},D.createElement(s.c,{span:12},D.createElement(g.a,{onText:Object(o.z)(\"Started\"),offText:Object(o.z)(\"Not started yet\"),checked:this.props.orthoCase.isStarted,onChange:(e,t)=>this.props.orthoCase.isStarted=t,disabled:!this.canEdit}),this.props.orthoCase.isStarted?D.createElement(v.a,{selectedKey:this.props.orthoCase.startedDate.toString(),options:this.dates.map(e=>({key:e.date.toString(),text:`${Object(r.j)(e.date,n.xb.getSetting(\"date_format\"))} ${e.treatmentType?`, ${e.treatmentType}`:\"\"}`})),disabled:!this.canEdit,onChange:(e,t)=>{this.props.orthoCase.startedDate=Object(r.r)(t.key)}}):\"\"),\" \",D.createElement(s.c,{span:12},D.createElement(g.a,{onText:Object(o.z)(\"Finished\"),offText:Object(o.z)(\"Not finished yet\"),checked:this.props.orthoCase.isFinished,onChange:(e,t)=>this.props.orthoCase.isFinished=t,disabled:!this.canEdit}),this.props.orthoCase.isFinished?D.createElement(v.a,{selectedKey:this.props.orthoCase.finishedDate.toString(),options:this.dates.map(e=>({key:e.date.toString(),text:`${Object(r.j)(e.date,n.xb.getSetting(\"date_format\"))} ${e.treatmentType?`, ${e.treatmentType}`:\"\"}`})),disabled:!this.canEdit,onChange:(e,t)=>{this.props.orthoCase.finishedDate=Object(r.r)(t.key)}}):\"\"))),D.createElement(s.l,{title:Object(o.z)(\"Records\")},o.y.online?o.y.dropboxActive?D.createElement(\"div\",{className:\"album\"},this.props.orthoCase.visits.length?D.createElement(\"table\",null,D.createElement(\"tbody\",null,D.createElement(\"tr\",null,D.createElement(\"td\",null),j.map((e,t)=>-1!==this.zoomedColumn&&this.zoomedColumn!==t?void 0:D.createElement(\"td\",{key:e},this.zoomedColumn===t?D.createElement(\"p\",{className:\"column-header\"},j[t]):D.createElement(\"p\",{className:\"term-initials\"},j[t].split(\" \").map(e=>e.charAt(0)).join(\"\")),D.createElement(\"br\",null),D.createElement(y.a,{content:Object(o.z)(\"Zoom\")},D.createElement(x.a,{iconProps:{iconName:this.zoomedColumn===t?\"ZoomOut\":\"ZoomIn\"},className:\"clickable-icon\",onClick:()=>{this.zoomedColumn!==t?this.zoomedColumn=t:this.zoomedColumn=-1}})),this.zoomedColumn===t?D.createElement(y.a,{content:Object(o.z)(\"View grid\")},D.createElement(x.a,{iconProps:{iconName:\"gridViewSmall\"},className:\"clickable-icon\",onClick:()=>{this.showGrid=!this.showGrid}})):\"\")),D.createElement(\"td\",null)),this.props.orthoCase.visits.slice().sort((e,t)=>e.visitNumber-t.visitNumber).map((e,t,a)=>{const i=a[t-1]||new n.I,l=a[t+1]||new n.I;return[D.createElement(\"tr\",{key:e.id},D.createElement(\"td\",null,D.createElement(y.a,{content:`#${e.visitNumber}, ${Object(r.j)(e.date,n.xb.getSetting(\"date_format\"))}`},D.createElement(x.a,{id:e.id.replace(/[0-9]/g,\"\"),iconProps:{iconName:\"info\"},onClick:()=>{this.openCallouts.push(e.id)}})),D.createElement(C.a,{onDismiss:()=>{this.openCallouts=this.openCallouts.filter(t=>t!==e.id)},hidden:-1===this.openCallouts.indexOf(e.id),className:\"visit-dialog\"},D.createElement(u.a,{compact:!0,items:[[D.createElement(\"div\",{id:\"gf-visit\"},\"gf-visit\"===this.expandedField?D.createElement(E.a,{autoFocus:!0,type:\"number\",label:Object(o.z)(\"Visit number\"),value:e.visitNumber.toString(),onBlur:()=>{this.expandedField=\"\"},disabled:!this.canEdit,onChange:(e,a)=>{this.props.orthoCase.visits[t].visitNumber=Object(r.r)(a),this.tu()}}):`${Object(o.z)(\"Visit\")} #${e.visitNumber}`)],[D.createElement(\"div\",{id:\"gf-date\"},\"gf-date\"===this.expandedField?D.createElement(v.a,{label:Object(o.z)(\"Visit date\"),selectedKey:e.date.toString(),disabled:!this.canEdit,options:this.dates.map(e=>({key:e.date.toString(),text:`${Object(r.j)(e.date,n.xb.getSetting(\"date_format\"))} ${e.treatmentType?`, ${e.treatmentType}`:\"\"}`})),onChange:(e,a)=>{this.props.orthoCase.visits[t].date=Object(r.r)(a.key),this.tu()}}):`${Object(o.z)(\"Date\")}: ${Object(r.j)(e.date,n.xb.getSetting(\"date_format\"))}`)],[D.createElement(\"div\",{id:\"gf-appliance\"},\"gf-appliance\"===this.expandedField?D.createElement(E.a,{autoFocus:!0,label:Object(o.z)(\"Appliance\"),disabled:!this.canEdit,value:e.appliance,onBlur:()=>{this.expandedField=\"\"},multiline:!0,onChange:(e,a)=>{this.props.orthoCase.visits[t].appliance=a,this.tu()}}):`${Object(o.z)(\"Appliance\")}: ${e.appliance?e.appliance:Object(o.z)(\"No appliance info\")}`)]],isHeaderVisible:!1,selectionMode:b.b.none,onActiveItemChanged:e=>{this.expandedField=e[0].props.id}}))),j.map((a,d)=>{const c=e.photos[d];if(-1===this.zoomedColumn||this.zoomedColumn===d)return D.createElement(\"td\",{key:a},this.showGrid&&this.zoomedColumn===d&&this.imagesTable[c.photoID]?D.createElement(s.e,null):\"\",c.photoID?this.imagesTable[c.photoID]?D.createElement(\"div\",{key:e.id,className:\"photo\",onClick:()=>{this.selectedPhotoId=c.id}},D.createElement(f.a,{iconName:\"MiniExpandMirrored\",className:\"hover-effect\"}),D.createElement(\"img\",{style:{width:\"100%\"},src:this.imagesTable[c.photoID],className:\"ortho-img-el\"}),this.selectedPhotoId===c.id?D.createElement(C.a,{modalProps:{className:\"photo-dialog\"},hidden:!1,onDismiss:()=>this.selectedPhotoId=\"\"},D.createElement(\"div\",{style:{position:\"relative\"}},D.createElement(\"img\",{style:{width:\"100%\"},src:this.imagesTable[c.photoID]}),this.overlayWithNext?D.createElement(\"img\",{className:\"overlay-img\",src:this.imagesTable[l.photos[d].photoID]}):\"\",this.overlayWithPrev?D.createElement(\"img\",{className:\"overlay-img\",src:this.imagesTable[i.photos[d].photoID]}):\"\"),D.createElement(u.a,{compact:!0,items:[[D.createElement(\"div\",{id:\"gf-visit\"},\"gf-visit\"===this.expandedField?D.createElement(E.a,{autoFocus:!0,disabled:!this.canEdit,type:\"number\",label:Object(o.z)(\"Visit number\"),value:e.visitNumber.toString(),onBlur:()=>{this.expandedField=\"\"},onChange:(e,a)=>{this.props.orthoCase.visits[t].visitNumber=Object(r.r)(a),this.tu()}}):`${Object(o.z)(\"Visit\")} #${e.visitNumber}`)],[D.createElement(\"div\",{id:\"gf-date\"},\"gf-date\"===this.expandedField?D.createElement(v.a,{label:Object(o.z)(\"Visit date\"),disabled:!this.canEdit,selectedKey:e.date.toString(),options:this.dates.map(e=>({key:e.date.toString(),text:`${Object(r.j)(e.date,n.xb.getSetting(\"date_format\"))} ${e.treatmentType?`, ${e.treatmentType}`:\"\"}`})),onChange:(e,a)=>{this.props.orthoCase.visits[t].date=Object(r.r)(a.key),this.tu()}}):`${Object(o.z)(\"Date\")}: ${Object(r.j)(e.date,n.xb.getSetting(\"date_format\"))}`)],[D.createElement(\"div\",{id:\"gf-appliance\"},\"gf-appliance\"===this.expandedField?D.createElement(E.a,{autoFocus:!0,label:Object(o.z)(\"Appliance\"),value:e.appliance,disabled:!this.canEdit,onBlur:()=>{this.expandedField=\"\"},multiline:!0,onChange:(e,a)=>{this.props.orthoCase.visits[t].appliance=a,this.tu()}}):`${Object(o.z)(\"Appliance\")}: ${e.appliance?e.appliance:Object(o.z)(\"No appliance info\")}`)],[D.createElement(\"div\",{id:\"gf-comment\"},\"gf-comment\"===this.expandedField?D.createElement(E.a,{autoFocus:!0,label:Object(o.z)(\"Comment\"),disabled:!this.canEdit,value:c.comment,onBlur:()=>{this.expandedField=\"\"},multiline:!0,onChange:(e,a)=>{this.props.orthoCase.visits[t].photos[d].comment=a,this.tu()}}):`${Object(o.z)(\"Comment\")}: ${c.comment?c.comment:Object(o.z)(\"no comment on this photo\")}`)]],isHeaderVisible:!1,selectionMode:b.b.none,onActiveItemChanged:e=>{this.expandedField=e[0].props.id}}),D.createElement(N.a,{items:[{key:\"overlay prev\",text:Object(o.z)(\"Overlay prev\"),iconProps:{iconName:\"MapLayers\"},className:this.overlayWithPrev?\"active-button\":void 0,onClick:()=>{this.overlayWithPrev=!this.overlayWithPrev},hidden:!this.imagesTable[i.photos[d].photoID]},{key:\"overlay next\",text:Object(o.z)(\"Overlay next\"),iconProps:{iconName:\"MapLayers\"},className:this.overlayWithNext?\"active-button\":void 0,onClick:()=>{this.overlayWithNext=!this.overlayWithNext},hidden:!this.imagesTable[l.photos[d].photoID]}],farItems:[{key:\"delete photo\",text:Object(o.z)(\"Delete\"),iconProps:{iconName:\"trash\"},disabled:!this.canEdit,onClick:()=>{this.props.orthoCase.visits[t].photos[d]=new n.B,this.selectedPhotoId=\"\",this.tu()}}]})):\"\"):D.createElement(f.a,{iconName:\"sync\",className:\"rotate\"}):D.createElement(s.g,Object.assign({},{crop:!0,allowMultiple:!1,accept:s.r.image,prevSrc:this.imagesTable[i.photos[d].photoID],disabled:!this.canEdit,onFinish:e=>{e[0]&&(this.props.orthoCase.visits[t].photos[d].photoID=e[0],this.tu())},onStartLoading:()=>{this.uploadingPhotoID=c.id},onFinishLoading:()=>{this.uploadingPhotoID=\"\"},targetDir:`${o.g}/${this.props.orthoCase._id}`}),D.createElement(y.a,{content:Object(o.z)(\"Add photo\")},D.createElement(x.a,{iconProps:{iconName:\"Photo2Add\"},className:\"clickable-icon add-photo\",disabled:!this.canEdit}))))}),D.createElement(\"td\",null,D.createElement(y.a,{content:Object(o.z)(\"Delete visit\")},D.createElement(x.a,{className:\"clickable-icon delete-visit\",key:e.id,disabled:!this.canEdit,iconProps:{iconName:\"DeleteRows\"},onClick:()=>{o.s.newModal({message:Object(o.z)(\"This visit data will be deleted along with all photos and notes\"),onConfirm:()=>{this.props.orthoCase.visits.splice(t,1),this.tu()},showCancelButton:!0,showConfirmButton:!0,id:Math.random()})}})))),D.createElement(\"tr\",{key:e.id+\"days\"},D.createElement(\"td\",{colSpan:7},a[t+1]?D.createElement(\"i\",{className:\"days-num\"},Math.round((l.date-e.date)/r.d),\" \",Object(o.z)(\"days\")):\"\"))]}))):D.createElement(m.a,{messageBarType:h.a.info},Object(o.z)(\"No visits recorded yet! add a new visit using the button below\")),D.createElement(\"br\",null),D.createElement(O.a,{disabled:!this.canEdit,iconProps:{iconName:\"ExploreContent\"},text:Object(o.z)(\"Add visit\"),onClick:()=>{const e=this.props.orthoCase.visits.length?this.props.orthoCase.visits.slice().sort((e,t)=>t.visitNumber-e.visitNumber)[0].visitNumber+1:1;this.props.orthoCase.visits.push(new n.I(void 0,e)),this.tu()}})):D.createElement(m.a,{messageBarType:h.a.warning},Object(o.z)(\"A valid DropBox access token is required for this section\")):D.createElement(m.a,{messageBarType:h.a.warning},Object(o.z)(\"You can not access orthodontic records while offline\"))),D.createElement(s.l,{title:Object(o.z)(\"Notes for the next visit\")},D.createElement(l.a,{label:Object(o.z)(\"Add note\"),value:this.props.orthoCase.nextVisitNotes,onChange:e=>{this.props.orthoCase.nextVisitNotes=e,this.tu()},disabled:!this.canEdit})))}tu(){this.props.orthoCase.triggerUpdate++}};i.c([c.k],T.prototype,\"selectedPhotoId\",void 0),i.c([c.k],T.prototype,\"zoomedColumn\",void 0),i.c([c.k],T.prototype,\"expandedField\",void 0),i.c([c.k],T.prototype,\"uploadingPhotoID\",void 0),i.c([c.k],T.prototype,\"imagesTable\",void 0),i.c([c.k],T.prototype,\"showGrid\",void 0),i.c([c.k],T.prototype,\"overlayWithPrev\",void 0),i.c([c.k],T.prototype,\"overlayWithNext\",void 0),i.c([c.k],T.prototype,\"openCallouts\",void 0),i.c([c.d],T.prototype,\"canEdit\",null),i.c([c.d],T.prototype,\"dates\",null),i.c([c.d],T.prototype,\"allImages\",null),T=i.c([p.a],T)}}]);","extractedComments":[]}