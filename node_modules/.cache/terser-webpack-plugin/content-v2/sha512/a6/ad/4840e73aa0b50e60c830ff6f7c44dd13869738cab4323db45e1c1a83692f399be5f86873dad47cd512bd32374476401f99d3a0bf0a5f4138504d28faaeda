{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{299:function(e,t,n){\"use strict\";var a=n(156),i=n(0),r=n(1),s=n(157),o=n(46),c=n(49),l=n(65),m=n(178),d=n(187),b=Object(s.a)(),h=function(e){function t(t){var n=e.call(this,t)||this;return n._toggleButton=r.createRef(),n._onClick=function(e){var t=n.props,a=t.disabled,i=t.checked,r=t.onChange,s=t.onChanged,o=t.onClick,c=n.state.checked;a||(void 0===i&&n.setState({checked:!c}),r&&r(e,!c),s&&s(!c),o&&o(e))},n._warnMutuallyExclusive({checked:\"defaultChecked\"}),n._warnDeprecations({onAriaLabel:\"ariaLabel\",offAriaLabel:void 0,onChanged:\"onChange\"}),n.state={checked:!(!t.checked&&!t.defaultChecked)},n._id=t.id||Object(o.c)(\"Toggle\"),n}return i.d(t,e),Object.defineProperty(t.prototype,\"checked\",{get:function(){return this.state.checked},enumerable:!0,configurable:!0}),t.prototype.componentWillReceiveProps=function(e){void 0!==e.checked&&this.setState({checked:!!e.checked})},t.prototype.render=function(){var e=this,t=this.props,n=t.as,a=void 0===n?\"div\":n,s=t.className,o=t.theme,l=t.disabled,h=t.keytipProps,p=t.label,u=t.ariaLabel,g=t.onAriaLabel,f=t.offAriaLabel,C=t.offText,E=t.onText,x=t.styles,O=t.inlineLabel,k=this.state.checked,j=k?E:C,z=k?g:f,v=Object(c.d)(this.props,c.g,[\"defaultChecked\"]),w=b(x,{theme:o,className:s,disabled:l,checked:k,inlineLabel:O,onOffMissing:!E&&!C});return r.createElement(a,{className:w.root,hidden:v.hidden},p&&r.createElement(m.a,{htmlFor:this._id,className:w.label},p),r.createElement(\"div\",{className:w.container},r.createElement(d.a,{keytipProps:h,ariaDescribedBy:v[\"aria-describedby\"],disabled:l},function(t){return r.createElement(\"button\",i.a({},v,t,{className:w.pill,disabled:l,id:e._id,type:\"button\",role:\"switch\",ref:e._toggleButton,\"aria-disabled\":l,\"aria-checked\":k,\"aria-label\":u||z,\"data-is-focusable\":!0,onChange:e._noop,onClick:e._onClick}),r.createElement(\"div\",{className:w.thumb}))}),j&&r.createElement(m.a,{className:w.text},j)))},t.prototype.focus=function(){this._toggleButton.current&&this._toggleButton.current.focus()},t.prototype._noop=function(){},t}(l.a),p=n(9);n.d(t,\"a\",function(){return u});var u=Object(a.a)(h,function(e){var t,n,a,i,r,s,o,c=e.theme,l=e.className,m=e.disabled,d=e.checked,b=e.inlineLabel,h=e.onOffMissing,u=c.semanticColors,g=u.bodyBackground,f=u.inputBackgroundChecked,C=u.inputBackgroundCheckedHovered,E=u.disabledBodySubtext,x=u.inputBorderHovered,O=u.inputForegroundChecked,k=u.disabledBodySubtext,j=u.disabledBackground,z=u.smallInputBorder,v=u.inputBorderHovered,w=u.disabledBodySubtext,y=u.disabledText;return{root:[\"ms-Toggle\",d&&\"is-checked\",!m&&\"is-enabled\",m&&\"is-disabled\",c.fonts.medium,{marginBottom:\"8px\"},b&&{display:\"flex\",alignItems:\"center\"},l],label:[\"ms-Toggle-label\",m&&{color:y,selectors:(t={},t[p.f]={color:\"GrayText\"},t)},b&&!h&&{marginRight:16},h&&b&&{order:1,marginLeft:16}],container:[\"ms-Toggle-innerContainer\",{display:\"inline-flex\",position:\"relative\"}],pill:[\"ms-Toggle-background\",Object(p.t)(c,-3),{fontSize:\"20px\",boxSizing:\"border-box\",width:\"2.2em\",height:\"1em\",borderRadius:\"1em\",transition:\"all 0.1s ease\",borderWidth:\"1px\",borderStyle:\"solid\",background:g,borderColor:z,cursor:\"pointer\",display:\"flex\",alignItems:\"center\",padding:\"0 .2em\"},!m&&[!d&&{selectors:{\":hover\":[{borderColor:v}],\":hover .ms-Toggle-thumb\":[{selectors:(n={},n[p.f]={borderColor:\"Highlight\"},n)}]}},d&&[{background:f,borderColor:\"transparent\",justifyContent:\"flex-end\"},{selectors:(a={\":hover\":[{backgroundColor:C,borderColor:\"transparent\",selectors:(i={},i[p.f]={backgroundColor:\"Highlight\"},i)}]},a[p.f]={backgroundColor:\"WindowText\"},a)}]],m&&[{cursor:\"default\"},!d&&[{borderColor:w}],d&&[{backgroundColor:E,borderColor:\"transparent\",justifyContent:\"flex-end\"}]],!m&&{selectors:{\"&:hover\":{selectors:(r={},r[p.f]={borderColor:\"Highlight\"},r)}}}],thumb:[\"ms-Toggle-thumb\",{width:\".5em\",height:\".5em\",borderRadius:\".5em\",transition:\"all 0.1s ease\",backgroundColor:x,borderColor:\"transparent\",borderWidth:\".28em\",borderStyle:\"solid\",boxSizing:\"border-box\"},!m&&d&&[{backgroundColor:O,selectors:(s={},s[p.f]={backgroundColor:\"Window\",borderColor:\"Window\"},s)}],m&&[!d&&[{backgroundColor:k}],d&&[{backgroundColor:j}]]],text:[\"ms-Toggle-stateText\",{selectors:{\"&&\":{padding:\"0\",margin:\"0 8px\",userSelect:\"none\"}}},m&&{selectors:{\"&&\":{color:y,selectors:(o={},o[p.f]={color:\"GrayText\"},o)}}}]}},void 0,{scope:\"Toggle\"})},654:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"StaffPage\",function(){return k});var a=n(0),i=n(6),r=n(3),s=n(10),o=n(4),c=n(2),l=n(8),m=n(171),d=n(98),b=n(175),h=n(7),p=n(182),u=n(21),g=n(177),f=n(185),C=n(179),E=n(14),x=n(299),O=n(1);let k=class extends O.Component{constructor(){super(...arguments),this.selectedId=r.w.currentLocation.split(\"/\")[1],this.viewWhich=1}get canEdit(){return r.A.currentUser.canEditStaff}get selectedMemberIndex(){return s.zb.getIndexByID(this.selectedId)}get member(){return s.zb.list[this.selectedMemberIndex]}render(){return O.createElement(\"div\",{className:\"staff-component p-15 p-l-10 p-r-10\"},O.createElement(i.k,{gutter:16},O.createElement(i.c,{lg:16},O.createElement(i.d,{maxItemsOnLoad:10,heads:[Object(r.z)(\"Staff Member\"),Object(r.z)(\"Last/Next Appointment\"),Object(r.z)(\"Contact Details\")],rows:s.zb.list.map(e=>({id:e._id,searchableString:e.searchableString,cells:[{dataValue:e.name,component:O.createElement(\"div\",null,O.createElement(i.i,{name:e.name,secondaryElement:O.createElement(\"span\",null,e.nextAppointments.length,\" \",Object(r.z)(\"upcoming appointments\")),size:3}),O.createElement(\"br\",null),O.createElement(m.a,{content:Object(r.z)(\"Staff Member Details\")},O.createElement(d.a,{className:\"action-button\",iconProps:{iconName:\"DietPlanNotebook\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=1}})),O.createElement(m.a,{content:Object(r.z)(\"Level and Permission\")},O.createElement(d.a,{className:\"action-button\",iconProps:{iconName:\"Permissions\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=2}})),r.A.currentUser.canViewAppointments?O.createElement(m.a,{content:Object(r.z)(\"Upcoming Appointments\")},O.createElement(d.a,{className:\"action-button\",iconProps:{iconName:\"Calendar\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=3}})):\"\",O.createElement(m.a,{content:Object(r.z)(\"Delete\")},O.createElement(d.a,{className:\"action-button delete\",iconProps:{iconName:\"Trash\"},onClick:()=>s.zb.deleteModal(e._id),disabled:!this.canEdit}))),className:\"no-label\"},{dataValue:(e.lastAppointment||e.nextAppointment||{date:0}).date,component:O.createElement(\"div\",null,O.createElement(i.j,{text:e.lastAppointment&&e.lastAppointment.treatment?e.lastAppointment.treatment.type:\"\",subText:e.lastAppointment?Object(o.j)(e.lastAppointment.date,s.xb.getSetting(\"date_format\")):Object(r.z)(\"No last appointment\"),size:3,onRenderInitials:()=>O.createElement(b.a,{iconName:\"Previous\"}),onClick:()=>{},initialsColor:e.lastAppointment?void 0:h.a.transparent}),O.createElement(\"br\",null),O.createElement(i.j,{text:e.nextAppointment&&e.nextAppointment.treatment?e.nextAppointment.treatment.type:\"\",subText:e.nextAppointment?Object(o.j)(e.nextAppointment.date,s.xb.getSetting(\"date_format\")):Object(r.z)(\"No next appointment\"),size:3,onRenderInitials:()=>O.createElement(b.a,{iconName:\"Next\"}),onClick:()=>{},initialsColor:e.nextAppointment?void 0:h.a.transparent})),className:\"hidden-xs\"},{dataValue:e.phone||e.email,component:O.createElement(\"div\",null,O.createElement(i.j,{text:e.phone,subText:e.phone?Object(r.z)(\"Phone number\"):Object(r.z)(\"No phone number\"),size:3,onRenderInitials:()=>O.createElement(b.a,{iconName:\"Phone\"}),initialsColor:e.phone?h.a.teal:h.a.transparent}),O.createElement(i.j,{text:e.email,subText:e.email?Object(r.z)(\"Email\"):Object(r.z)(\"No Email\"),size:3,onRenderInitials:()=>O.createElement(b.a,{iconName:\"Mail\"}),initialsColor:e.email?h.a.teal:h.a.transparent})),className:\"hidden-xs\"}]})),commands:this.canEdit?[{key:\"addNew\",title:\"Add new\",name:Object(r.z)(\"Add new\"),onClick:()=>{const e=new s.F;s.zb.list.push(e),this.selectedId=e._id,this.viewWhich=1},iconProps:{iconName:\"Add\"}}]:[]})),O.createElement(i.c,{lg:8},O.createElement(\"table\",{className:\"ms-table duty-table\"},O.createElement(\"tbody\",null,o.c.days(!0).map(e=>O.createElement(\"tr\",{key:e},O.createElement(\"th\",{className:\"day-name\"},Object(r.z)(e)),O.createElement(\"td\",null,s.zb.list.filter(t=>-1!==t.onDutyDays.indexOf(e)).map(t=>O.createElement(i.i,{className:\"m-b-5\",size:3,key:t._id,name:t.name,secondaryElement:O.createElement(\"span\",null,(t.weeksAppointments[e]||[]).length,\" \",Object(r.z)(\"appointments for\"),\" \",Object(r.z)(e)),onClick:()=>{this.selectedId=t._id}}))))))))),this.member&&this.viewWhich?O.createElement(p.a,{isOpen:!!this.member,type:u.a.medium,closeButtonAriaLabel:\"Close\",isLightDismiss:!0,onDismiss:()=>{this.selectedId=\"\",this.viewWhich=0},onRenderNavigation:()=>O.createElement(i.k,{className:\"panel-heading\"},O.createElement(i.c,{span:20},this.member.name?O.createElement(i.i,{name:this.member.name,secondaryElement:O.createElement(\"span\",null,1===this.viewWhich?Object(r.z)(\"Staff Member Details\"):\"\",2===this.viewWhich?Object(r.z)(\"Level and Permission\"):\"\",3===this.viewWhich?Object(r.z)(\"Upcoming Appointments\"):\"\"),tertiaryText:this.member.phone,size:3}):O.createElement(\"p\",null)),O.createElement(i.c,{span:4,className:\"close\"},O.createElement(d.a,{iconProps:{iconName:\"cancel\"},onClick:()=>{this.selectedId=\"\"}})))},O.createElement(\"div\",{className:\"staff-editor\"},1===this.viewWhich?O.createElement(\"div\",null,O.createElement(i.l,{title:Object(r.z)(\"Basic Info\")},O.createElement(\"div\",{className:\"staff-input\"},O.createElement(g.a,{label:Object(r.z)(\"Name\"),value:this.member.name,onChange:(e,t)=>this.member.name=t,disabled:!this.canEdit})),O.createElement(\"div\",{className:\"staff-input\"},O.createElement(\"label\",null,Object(r.z)(\"Days on duty\")),o.c.days(!0).map((e,t)=>O.createElement(f.a,{key:e,disabled:!this.canEdit,label:o.c.daysShort()[t],checked:this.member.onDutyDays.indexOf(e)>-1,onChange:(t,n)=>{n?this.member.onDutyDays.push(e):this.member.onDutyDays.splice(this.member.onDutyDays.indexOf(e),1),this.member.triggerUpdate++}})))),O.createElement(i.l,{title:Object(r.z)(\"Contact Details\")},O.createElement(i.k,{gutter:12},O.createElement(i.c,{sm:12},O.createElement(\"div\",{className:\"staff-input\"},O.createElement(g.a,{label:Object(r.z)(\"Phone number\"),value:this.member.phone,onChange:(e,t)=>this.member.phone=t,disabled:!this.canEdit}))),O.createElement(i.c,{sm:12},O.createElement(\"div\",{className:\"staff-input\"},O.createElement(g.a,{label:Object(r.z)(\"Email\"),value:this.member.email,onChange:(e,t)=>this.member.email=t,disabled:!this.canEdit})))))):\"\",2===this.viewWhich?O.createElement(\"div\",null,this.member._id===r.A.currentUser._id?O.createElement(i.l,{title:Object(r.z)(\"Login PIN\")},O.createElement(\"div\",{className:\"staff-input\"},O.createElement(g.a,{label:Object(r.z)(\"Login PIN\"),value:this.member.pin,onChange:(e,t)=>{Object(o.r)(t)<1e4?this.member.pin=t.toString():this.forceUpdate()},onClick:()=>{},type:\"number\",max:9999})),O.createElement(C.a,{messageBarType:E.a.info},Object(r.z)(\"Only you can edit this PIN, and it can only be 4 numbers\"))):\"\",O.createElement(i.l,{title:Object(r.z)(\"Permission\")},this.member._id===r.A.currentUser._id?O.createElement(\"div\",null,O.createElement(C.a,{messageBarType:E.a.warning},Object(r.z)(\"You can't edit your own level and permissions\")),O.createElement(\"br\",null)):\"\",O.createElement(x.a,{defaultChecked:this.member.operates,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Operates on patients\"),offText:Object(r.z)(\"Doesn't operate on patients\"),onChange:(e,t)=>{this.member.operates=t}}),O.createElement(x.a,{defaultChecked:this.member.canViewStaff,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can view staff page\"),offText:Object(r.z)(\"Can not view staff page\"),onChange:(e,t)=>{this.member.canViewStaff=t}}),O.createElement(x.a,{defaultChecked:this.member.canViewPatients,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can view patients page\"),offText:Object(r.z)(\"Can not view patients page\"),onChange:(e,t)=>{this.member.canViewPatients=t}}),s.xb.getSetting(\"module_orthodontics\")?O.createElement(x.a,{defaultChecked:this.member.canViewOrtho,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can view orthodontics page\"),offText:Object(r.z)(\"Can not view orthodontics page\"),onChange:(e,t)=>{this.member.canViewOrtho=t}}):\"\",O.createElement(x.a,{defaultChecked:this.member.canViewAppointments,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can view appointments page\"),offText:Object(r.z)(\"Can not view appointments page\"),onChange:(e,t)=>{this.member.canViewAppointments=t}}),O.createElement(x.a,{defaultChecked:this.member.canViewTreatments,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can view treatments page\"),offText:Object(r.z)(\"Can not view treatments page\"),onChange:(e,t)=>{this.member.canViewTreatments=t}}),s.xb.getSetting(\"module_prescriptions\")?O.createElement(x.a,{defaultChecked:this.member.canViewPrescriptions,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can view prescriptions page\"),offText:Object(r.z)(\"Can not view prescriptions page\"),onChange:(e,t)=>{this.member.canViewPrescriptions=t}}):\"\",s.xb.getSetting(\"module_statistics\")?O.createElement(x.a,{defaultChecked:this.member.canViewStats,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can view statistics page\"),offText:Object(r.z)(\"Can not view statistics page\"),onChange:(e,t)=>{this.member.canViewStats=t}}):\"\",O.createElement(x.a,{defaultChecked:this.member.canViewSettings,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can view settings page\"),offText:Object(r.z)(\"Can not view settings page\"),onChange:(e,t)=>{this.member.canViewSettings=t}}),this.member.canViewStaff?O.createElement(x.a,{defaultChecked:this.member.canEditStaff,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can edit staff page\"),offText:Object(r.z)(\"Can not edit staff page\"),onChange:(e,t)=>{this.member.canEditStaff=t}}):\"\",this.member.canViewPatients?O.createElement(x.a,{defaultChecked:this.member.canEditPatients,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can edit patients page\"),offText:Object(r.z)(\"Can not edit patients page\"),onChange:(e,t)=>{this.member.canEditPatients=t}}):\"\",s.xb.getSetting(\"module_orthodontics\")&&this.member.canViewOrtho?O.createElement(x.a,{defaultChecked:this.member.canEditOrtho,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can edit orthodontics page\"),offText:Object(r.z)(\"Can not edit orthodontics page\"),onChange:(e,t)=>{this.member.canEditOrtho=t}}):\"\",this.member.canViewAppointments?O.createElement(x.a,{defaultChecked:this.member.canEditAppointments,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can edit appointments page\"),offText:Object(r.z)(\"Can not edit appointments page\"),onChange:(e,t)=>{this.member.canEditAppointments=t}}):\"\",this.member.canViewTreatments?O.createElement(x.a,{defaultChecked:this.member.canEditTreatments,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can edit treatments page\"),offText:Object(r.z)(\"Can not edit treatments page\"),onChange:(e,t)=>{this.member.canEditTreatments=t}}):\"\",s.xb.getSetting(\"module_prescriptions\")&&this.member.canViewPrescriptions?O.createElement(x.a,{defaultChecked:this.member.canEditPrescriptions,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can edit prescriptions page\"),offText:Object(r.z)(\"Can not edit prescriptions page\"),onChange:(e,t)=>{this.member.canEditPrescriptions=t}}):\"\",this.member.canViewSettings?O.createElement(x.a,{defaultChecked:this.member.canEditSettings,disabled:this.member._id===r.A.currentUser._id,onText:Object(r.z)(\"Can edit settings page\"),offText:Object(r.z)(\"Can not edit settings page\"),onChange:(e,t)=>{this.member.canEditSettings=t}}):\"\")):\"\",3===this.viewWhich?O.createElement(i.l,{title:Object(r.z)(\"Upcoming Appointments\")},this.member.nextAppointments.length?O.createElement(s.d,{list:this.member.nextAppointments}):O.createElement(C.a,{messageBarType:E.a.info},Object(r.z)(\"There are no upcoming appointments for this staff member\"))):\"\")):\"\")}};a.c([c.k],k.prototype,\"selectedId\",void 0),a.c([c.k],k.prototype,\"viewWhich\",void 0),a.c([c.d],k.prototype,\"canEdit\",null),a.c([c.d],k.prototype,\"selectedMemberIndex\",null),a.c([c.d],k.prototype,\"member\",null),k=a.c([l.a],k)}}]);","extractedComments":[]}