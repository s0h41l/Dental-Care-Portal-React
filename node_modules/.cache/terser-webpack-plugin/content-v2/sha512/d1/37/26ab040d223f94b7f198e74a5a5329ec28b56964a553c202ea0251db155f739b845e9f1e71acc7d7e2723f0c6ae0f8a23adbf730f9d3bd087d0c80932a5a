{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{299:function(e,t,n){\"use strict\";var a=n(156),o=n(0),i=n(1),l=n(157),r=n(46),c=n(49),s=n(65),d=n(178),b=n(187),m=Object(l.a)(),u=function(e){function t(t){var n=e.call(this,t)||this;return n._toggleButton=i.createRef(),n._onClick=function(e){var t=n.props,a=t.disabled,o=t.checked,i=t.onChange,l=t.onChanged,r=t.onClick,c=n.state.checked;a||(void 0===o&&n.setState({checked:!c}),i&&i(e,!c),l&&l(!c),r&&r(e))},n._warnMutuallyExclusive({checked:\"defaultChecked\"}),n._warnDeprecations({onAriaLabel:\"ariaLabel\",offAriaLabel:void 0,onChanged:\"onChange\"}),n.state={checked:!(!t.checked&&!t.defaultChecked)},n._id=t.id||Object(r.c)(\"Toggle\"),n}return o.d(t,e),Object.defineProperty(t.prototype,\"checked\",{get:function(){return this.state.checked},enumerable:!0,configurable:!0}),t.prototype.componentWillReceiveProps=function(e){void 0!==e.checked&&this.setState({checked:!!e.checked})},t.prototype.render=function(){var e=this,t=this.props,n=t.as,a=void 0===n?\"div\":n,l=t.className,r=t.theme,s=t.disabled,u=t.keytipProps,g=t.label,h=t.ariaLabel,p=t.onAriaLabel,k=t.offAriaLabel,f=t.offText,y=t.onText,x=t.styles,E=t.inlineLabel,C=this.state.checked,S=C?y:f,O=C?p:k,j=Object(c.d)(this.props,c.g,[\"defaultChecked\"]),z=m(x,{theme:r,className:l,disabled:s,checked:C,inlineLabel:E,onOffMissing:!y&&!f});return i.createElement(a,{className:z.root,hidden:j.hidden},g&&i.createElement(d.a,{htmlFor:this._id,className:z.label},g),i.createElement(\"div\",{className:z.container},i.createElement(b.a,{keytipProps:u,ariaDescribedBy:j[\"aria-describedby\"],disabled:s},function(t){return i.createElement(\"button\",o.a({},j,t,{className:z.pill,disabled:s,id:e._id,type:\"button\",role:\"switch\",ref:e._toggleButton,\"aria-disabled\":s,\"aria-checked\":C,\"aria-label\":h||O,\"data-is-focusable\":!0,onChange:e._noop,onClick:e._onClick}),i.createElement(\"div\",{className:z.thumb}))}),S&&i.createElement(d.a,{className:z.text},S)))},t.prototype.focus=function(){this._toggleButton.current&&this._toggleButton.current.focus()},t.prototype._noop=function(){},t}(s.a),g=n(9);n.d(t,\"a\",function(){return h});var h=Object(a.a)(u,function(e){var t,n,a,o,i,l,r,c=e.theme,s=e.className,d=e.disabled,b=e.checked,m=e.inlineLabel,u=e.onOffMissing,h=c.semanticColors,p=h.bodyBackground,k=h.inputBackgroundChecked,f=h.inputBackgroundCheckedHovered,y=h.disabledBodySubtext,x=h.inputBorderHovered,E=h.inputForegroundChecked,C=h.disabledBodySubtext,S=h.disabledBackground,O=h.smallInputBorder,j=h.inputBorderHovered,z=h.disabledBodySubtext,v=h.disabledText;return{root:[\"ms-Toggle\",b&&\"is-checked\",!d&&\"is-enabled\",d&&\"is-disabled\",c.fonts.medium,{marginBottom:\"8px\"},m&&{display:\"flex\",alignItems:\"center\"},s],label:[\"ms-Toggle-label\",d&&{color:v,selectors:(t={},t[g.f]={color:\"GrayText\"},t)},m&&!u&&{marginRight:16},u&&m&&{order:1,marginLeft:16}],container:[\"ms-Toggle-innerContainer\",{display:\"inline-flex\",position:\"relative\"}],pill:[\"ms-Toggle-background\",Object(g.t)(c,-3),{fontSize:\"20px\",boxSizing:\"border-box\",width:\"2.2em\",height:\"1em\",borderRadius:\"1em\",transition:\"all 0.1s ease\",borderWidth:\"1px\",borderStyle:\"solid\",background:p,borderColor:O,cursor:\"pointer\",display:\"flex\",alignItems:\"center\",padding:\"0 .2em\"},!d&&[!b&&{selectors:{\":hover\":[{borderColor:j}],\":hover .ms-Toggle-thumb\":[{selectors:(n={},n[g.f]={borderColor:\"Highlight\"},n)}]}},b&&[{background:k,borderColor:\"transparent\",justifyContent:\"flex-end\"},{selectors:(a={\":hover\":[{backgroundColor:f,borderColor:\"transparent\",selectors:(o={},o[g.f]={backgroundColor:\"Highlight\"},o)}]},a[g.f]={backgroundColor:\"WindowText\"},a)}]],d&&[{cursor:\"default\"},!b&&[{borderColor:z}],b&&[{backgroundColor:y,borderColor:\"transparent\",justifyContent:\"flex-end\"}]],!d&&{selectors:{\"&:hover\":{selectors:(i={},i[g.f]={borderColor:\"Highlight\"},i)}}}],thumb:[\"ms-Toggle-thumb\",{width:\".5em\",height:\".5em\",borderRadius:\".5em\",transition:\"all 0.1s ease\",backgroundColor:x,borderColor:\"transparent\",borderWidth:\".28em\",borderStyle:\"solid\",boxSizing:\"border-box\"},!d&&b&&[{backgroundColor:E,selectors:(l={},l[g.f]={backgroundColor:\"Window\",borderColor:\"Window\"},l)}],d&&[!b&&[{backgroundColor:C}],b&&[{backgroundColor:S}]]],text:[\"ms-Toggle-stateText\",{selectors:{\"&&\":{padding:\"0\",margin:\"0 8px\",userSelect:\"none\"}}},d&&{selectors:{\"&&\":{color:v,selectors:(r={},r[g.f]={color:\"GrayText\"},r)}}}]}},void 0,{scope:\"Toggle\"})},653:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"SettingsPage\",function(){return y}),n.d(t,\"SettingInputComponent\",function(){return x});var a=n(0),o=n(6),i=n(3),l=n(10),r=n(4),c=n(2),s=n(8),d=n(173),b=n(177),m=n(299),u=n(62),g=n(179),h=n(14),p=n(171),k=n(98),f=n(1);let y=class extends f.Component{constructor(){super(...arguments),this.triggerUpdate=0,this.inputEl=null,this.loading=!1}get canEdit(){return i.A.currentUser.canEditSettings}componentWillMount(){setTimeout(()=>l.xb.updateDropboxBackups(),r.t)}render(){return f.createElement(\"div\",{className:\"settings-component p-15 p-l-10 p-r-10\"},f.createElement(o.l,{title:Object(i.z)(\"General Setting\")},f.createElement(x,{element:f.createElement(d.a,{label:Object(i.z)(\"Language\"),options:[{key:\"en\",text:\"English\"},{key:\"ar\",text:\"العربية\"}],defaultSelectedKey:l.xb.getSetting(\"lang\"),onChange:(e,t)=>{l.xb.setSetting(\"lang\",t.key.toString())},disabled:!this.canEdit}),info:Object(i.z)(\"Choose the main language of display menus and items\")}),f.createElement(x,{element:f.createElement(d.a,{label:Object(i.z)(\"Date format\"),options:[{key:\"dd/mm/yyyy\",text:\"dd/mm/yyyy\"},{key:\"mm/dd/yyyy\",text:\"mm/dd/yyyy\"},{key:\"dd MM 'YY\",text:\"dd MM 'YY\"}],defaultSelectedKey:l.xb.getSetting(\"date_format\"),onChange:(e,t)=>{l.xb.setSetting(\"date_format\",t.key.toString())},disabled:!this.canEdit}),info:Object(i.z)(\"Set the date format to be used across this application\")}),f.createElement(x,{element:f.createElement(d.a,{label:Object(i.z)(\"Week ends on\"),options:r.c.days(!0).map((e,t)=>({key:t.toString(),text:Object(i.z)(e)})),defaultSelectedKey:l.xb.getSetting(\"weekend_num\"),onChange:(e,t)=>{l.xb.setSetting(\"weekend_num\",t.key.toString())},disabled:!this.canEdit}),info:Object(i.z)(\"On which day the week ends\")}),f.createElement(x,{element:f.createElement(b.a,{value:l.xb.getSetting(\"dropbox_accessToken\"),label:Object(i.z)(\"Dropbox access token\"),onChange:(e,t)=>{l.xb.setSetting(\"dropbox_accessToken\",t),setTimeout(()=>i.y.validateDropBoxToken(),r.t/2)},disabled:!this.canEdit}),info:Object(i.z)(\"This access token is used to store files across the application, like backups and images\")})),f.createElement(o.l,{title:Object(i.z)(\"Financial Settings\")},l.xb.getSetting(\"time_tracking\")?f.createElement(x,{element:f.createElement(b.a,{label:Object(i.z)(\"Time expenses (per hour)\"),type:\"number\",value:l.xb.getSetting(\"hourlyRate\"),onChange:(e,t)=>{l.xb.setSetting(\"hourlyRate\",t.toString())},disabled:!this.canEdit}),info:Object(i.z)(\"When time tracking enabled, this is used to calculate profits and expenses, as time is also added to the expenses So here you can put the electricity, rent, and other time dependent expenses\")}):\"\",f.createElement(x,{element:f.createElement(b.a,{label:Object(i.z)(\"Currency symbol\"),value:l.xb.getSetting(\"currencySymbol\"),onChange:(e,t)=>{l.xb.setSetting(\"currencySymbol\",t.toString())},disabled:!this.canEdit}),info:Object(i.z)(\"This symbol you enter here will be used across your application\")})),f.createElement(o.l,{title:Object(i.z)(\"Optional Modules and Features\")},f.createElement(m.a,{onText:Object(i.z)(\"Prescriptions module enabled\"),offText:Object(i.z)(\"Prescriptions module disabled\"),defaultChecked:!!l.xb.getSetting(\"module_prescriptions\"),onChange:(e,t)=>{l.xb.setSetting(\"module_prescriptions\",t?\"enable\":\"\")},disabled:!this.canEdit}),f.createElement(m.a,{onText:Object(i.z)(\"Orthodontic module enabled\"),offText:Object(i.z)(\"Orthodontic module disabled\"),defaultChecked:!!l.xb.getSetting(\"module_orthodontics\"),onChange:(e,t)=>{l.xb.setSetting(\"module_orthodontics\",t?\"enable\":\"\")},disabled:!this.canEdit}),f.createElement(m.a,{onText:Object(i.z)(\"Endodontic module enabled\"),offText:Object(i.z)(\"Endodontic module disabled\"),defaultChecked:!!l.xb.getSetting(\"module_endodontics\"),onChange:(e,t)=>{l.xb.setSetting(\"module_endodontics\",t?\"enable\":\"\")},disabled:!this.canEdit}),f.createElement(m.a,{onText:Object(i.z)(\"Statistics module enabled\"),offText:Object(i.z)(\"Statistics module disabled\"),defaultChecked:!!l.xb.getSetting(\"module_statistics\"),onChange:(e,t)=>{l.xb.setSetting(\"module_statistics\",t?\"enable\":\"\")},disabled:!this.canEdit}),f.createElement(m.a,{onText:Object(i.z)(\"Time tracking enabled\"),offText:Object(i.z)(\"Time tracking disabled\"),defaultChecked:!!l.xb.getSetting(\"time_tracking\"),onChange:(e,t)=>{l.xb.setSetting(\"time_tracking\",t?\"enable\":\"\")},disabled:!this.canEdit}),f.createElement(m.a,{onText:Object(i.z)(\"Consents enabled\"),offText:Object(i.z)(\"Consents tracking disabled\"),defaultChecked:!!l.xb.getSetting(\"module_consents\"),onChange:(e,t)=>{l.xb.setSetting(\"module_consents\",t?\"enable\":\"\")},disabled:!this.canEdit})),f.createElement(o.l,{title:Object(i.z)(\"Backup and Restore\")},i.y.online?f.createElement(\"div\",null,f.createElement(u.a,{onClick:()=>{i.i.compact()},iconProps:{iconName:\"ZipFolder\"},className:\"m-l-5 m-t-5\",text:Object(i.z)(\"Run compaction\")}),f.createElement(u.a,{onClick:()=>{Object(i.m)()},className:\"m-l-5 m-t-5\",iconProps:{iconName:\"Database\"},text:Object(i.z)(\"Download a backup\")}),f.createElement(u.a,{onClick:()=>this.inputEl?this.inputEl.click():\"\",className:\"m-l-5 m-t-5\",iconProps:{iconName:\"DatabaseSync\"},text:Object(i.z)(\"Restore from file\")}),f.createElement(\"input\",{ref:e=>this.inputEl=e,hidden:!0,type:\"file\",multiple:!1,onChange:e=>a.b(this,void 0,void 0,function*(){e.target.files&&e.target.files.length>0&&(yield i.u.fromFile(e.target.files[0]))})})):f.createElement(g.a,{messageBarType:h.a.warning},Object(i.z)(\"Backup and restore functionality are not available while you're offline\"))),f.createElement(o.l,{title:Object(i.z)(\"Automated Backup and Restore\")},i.y.online?i.y.dropboxActive?f.createElement(\"div\",null,f.createElement(d.a,{label:Object(i.z)(\"Backup frequency\"),options:[{key:\"d\",text:Object(i.z)(\"Daily\")},{key:\"w\",text:Object(i.z)(\"Weekly\")},{key:\"m\",text:Object(i.z)(\"Monthly\")},{key:\"n\",text:Object(i.z)(\"Never\")}],defaultSelectedKey:l.xb.getSetting(\"backup_freq\"),onChange:(e,t)=>{l.xb.setSetting(\"backup_freq\",t.key.toString())},disabled:!this.canEdit}),f.createElement(b.a,{value:l.xb.getSetting(\"backup_retain\"),label:Object(i.z)(\"How many backups to retain\"),onChange:(e,t)=>{l.xb.setSetting(\"backup_retain\",t)},disabled:!this.canEdit,type:\"number\"}),l.xb.dropboxBackups.length?f.createElement(\"table\",{className:\"ms-table\"},f.createElement(\"thead\",null,f.createElement(\"tr\",null,f.createElement(\"th\",null,Object(i.z)(\"Backup\")),f.createElement(\"th\",null,Object(i.z)(\"Actions\")))),f.createElement(\"tbody\",null,l.xb.dropboxBackups.map(e=>{const t=new Date(e.client_modified);return f.createElement(\"tr\",{key:e.id},f.createElement(\"td\",null,f.createElement(o.j,{onRenderInitials:()=>f.createElement(\"div\",{style:{textAlign:\"center\",fontSize:10}},`${t.getDate()}/${t.getMonth()+1}`),text:Object(r.j)(t,l.xb.getSetting(\"date_format\")),subText:`${Math.round(e.size/1e3)} KB`})),f.createElement(\"td\",null,f.createElement(p.a,{content:Object(i.z)(\"Delete\")},f.createElement(k.a,{style:{marginRight:6},iconProps:{iconName:this.loading?\"sync\":\"delete\"},className:this.loading?\"rotate\":\"\",disabled:!this.canEdit,onClick:()=>{this.loading=!0,i.h.deleteOld(e.path_lower).then(()=>{this.loading=!1,l.xb.updateDropboxBackups()}).catch(()=>{this.loading=!1,l.xb.updateDropboxBackups()})}})),f.createElement(p.a,{content:Object(i.z)(\"Restore\")},f.createElement(k.a,{style:{marginRight:6},iconProps:{iconName:this.loading?\"sync\":\"DatabaseSync\"},className:this.loading?\"rotate\":\"\",disabled:!this.canEdit,onClick:()=>{this.loading=!0,i.u.fromDropbox(e.path_lower).then(()=>this.loading=!1).catch(()=>this.loading=!1)}}))))}))):\"\"):f.createElement(g.a,{messageBarType:h.a.warning},\"A valid DropBox access token is required for this section\"):f.createElement(g.a,{messageBarType:h.a.warning},Object(i.z)(\"Backup and restore functionality are not available while you're offline\"))))}};a.c([c.k],y.prototype,\"triggerUpdate\",void 0),a.c([c.k],y.prototype,\"inputEl\",void 0),a.c([c.d],y.prototype,\"canEdit\",null),a.c([c.k],y.prototype,\"loading\",void 0),y=a.c([s.a],y);let x=class extends f.Component{render(){return f.createElement(o.k,{gutter:12,style:{marginBottom:20}},f.createElement(o.c,{style:{marginBottom:-15},md:12},this.props.element),f.createElement(o.c,{md:12},f.createElement(g.a,{style:{marginTop:22},messageBarType:h.a.info},this.props.info)))}};x=a.c([s.a],x)}}]);","extractedComments":[]}