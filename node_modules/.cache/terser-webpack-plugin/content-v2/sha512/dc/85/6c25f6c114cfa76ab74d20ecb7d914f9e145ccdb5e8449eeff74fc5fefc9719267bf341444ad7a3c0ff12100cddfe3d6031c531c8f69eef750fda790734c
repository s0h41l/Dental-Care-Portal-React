{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{272:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return m});var a=n(0),i=n(8),s=n(95),r=n(98),l=n(1),o=n(77),c=n(4);class d extends l.Component{render(){var e=this.props.onProductTableUpdate,t=this.props.onRowDel,n=this.props.procedures.map(function(n){return l.createElement(p,{onProductTableUpdate:e,procedure:n,onDelEvent:t,key:n.id})});return l.createElement(\"div\",{style:{margin:\"24px 8px\",display:\"flex\",flexDirection:\"column\"}},l.createElement(\"div\",{style:{margin:\"auto\"}},l.createElement(s.a,{text:\"Add row\",onClick:this.props.onRowAdd,className:\"btn btn-success pull-right\"})),l.createElement(\"div\",{style:{height:\"100%\",minHeight:100,marginTop:16}},l.createElement(\"table\",{className:\"table table-bordered\"},l.createElement(\"thead\",null,l.createElement(\"tr\",null,l.createElement(\"th\",null,\"Done\"),l.createElement(\"th\",null,\"Date\"),l.createElement(\"th\",null,\"Priority\"),l.createElement(\"th\",null,\"Tooth\"),l.createElement(\"th\",null,\"Description\"),l.createElement(\"th\",null,\"Fees\"),l.createElement(\"th\",null,\"Discount\"),l.createElement(\"th\",null,\"Fees Discount\"),l.createElement(\"th\",null,\"Insurance\"),l.createElement(\"th\",null,\"Patient Signature\"))),l.createElement(\"tbody\",null,n))))}}class p extends l.Component{constructor(){super(...arguments),this.trashIcon={iconName:\"Trash\"}}onDelEvent(){this.props.onDelEvent(this.props.procedure)}render(){return l.createElement(\"tr\",{className:\"eachRow\"},l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"done\",value:this.props.procedure.done,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"date\",value:this.props.procedure.date,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"priority\",value:this.props.procedure.priority,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"tooth\",value:this.props.procedure.tooth,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"desc\",value:this.props.procedure.desc,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"fees\",value:this.props.procedure.fees,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"discount\",value:this.props.procedure.discount,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"fdiscount\",value:this.props.procedure.fdiscount,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"insurance\",value:this.props.procedure.insurance,id:this.props.procedure.id}}),l.createElement(h,{onProductTableUpdate:this.props.onProductTableUpdate,cellData:{type:\"psignature\",value:this.props.procedure.psignature,id:this.props.procedure.id}}),l.createElement(\"td\",{className:\"del-cell\"},l.createElement(r.a,{className:\"delete-btn\",iconProps:this.trashIcon,title:\"Delete row\",onClick:this.onDelEvent.bind(this),style:{border:\"1px solid red\",height:22}})))}}class h extends l.Component{render(){return l.createElement(\"td\",{style:{width:\"10%\"}},l.createElement(\"input\",{style:{width:\"100%\"},type:\"text\",name:this.props.cellData.type,id:this.props.cellData.id,value:this.props.cellData.value,onChange:this.props.onProductTableUpdate}))}}let m=class extends l.Component{constructor(e){super(e),this.handleRowDel=(e=>{var t=this.state.procedures.indexOf(e);this.state.procedures.splice(t,1),this.setState({procedures:this.state.procedures},()=>{this.props.patient.procedures=this.state.procedures})}),this.handleAddEvent=(()=>{var e=new Date;[e.getFullYear(),(\"0\"+(e.getMonth()+1)).slice(-2),(\"0\"+e.getDate()).slice(-2)].join(\"-\"),Object(c.k)();var t={id:\"\",name:\"\",quantity:0,patientID:\"\",tooth:[],fees:0,done:!1,date:(new Date).toISOString()},n=new o.g(t);this.state.procedures.push(n),this.setState({procedures:this.state.procedures},()=>{this.props.patient.procedures=this.state.procedures})}),this.handleProductTable=(e=>{var t={id:e.target.id,name:e.target.name,value:e.target.value},n=this.state.procedures.slice().map(function(e){for(var n in e)n==t.name&&e.id==t.id&&(e[n]=t.value);return e});this.setState({procedures:n},()=>{this.props.patient.procedures=this.state.procedures})}),this.state={procedures:this.props.patient.procedures}}render(){return l.createElement(\"div\",null,l.createElement(d,{onProductTableUpdate:this.handleProductTable.bind(this),onRowAdd:this.handleAddEvent.bind(this),onRowDel:this.handleRowDel.bind(this),procedures:this.state.procedures}))}};m=a.c([i.a],m)},646:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"OrthoPage\",function(){return C});var a=n(0),i=n(6),s=n(3),r=n(10),l=n(4),o=n(2),c=n(8),d=n(171),p=n(98),h=n(175),m=n(7),u=n(182),b=n(21),E=n(177),v=n(62),P=n(272),y=n(300),w=n(1);let C=class extends w.Component{constructor(){super(...arguments),this.showAdditionPanel=!1,this.newPatientName=\"\",this.selectedId=\"\",this.viewWhich=0}get selectedCase(){return r.cb.list.find(e=>e._id===this.selectedId)}get selectedPatient(){if(this.selectedCase&&this.selectedCase.patient)return this.selectedCase.patient}get canEdit(){return s.A.currentUser.canEditOrtho}render(){return w.createElement(\"div\",{className:\"orthodontic-cases-component p-15 p-l-10 p-r-10\"},w.createElement(i.d,{maxItemsOnLoad:10,className:\"orthodontic-cases-data-table\",heads:[Object(s.z)(\"Orthodontic Patient\"),Object(s.z)(\"Started/Finished Treatment\"),Object(s.z)(\"Last/Next Appointment\"),Object(s.z)(\"Total/Outstanding Payments\")],rows:r.cb.filtered.filter(e=>e.patient).map(e=>{const t=e.patient||new r.t;return{id:e._id,searchableString:e.searchableString,cells:[{dataValue:t.name,component:w.createElement(\"div\",null,w.createElement(i.i,{name:t.name,secondaryElement:w.createElement(\"span\",null,Object(s.z)(Object(r.W)(t.gender)),\" \",\"- \",t.age,\" \",Object(s.z)(\"years old\")),size:3}),w.createElement(\"br\",null),w.createElement(d.a,{content:Object(s.z)(\"Patient Details\")},w.createElement(p.a,{className:\"action-button\",iconProps:{iconName:\"DietPlanNotebook\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=1}})),w.createElement(d.a,{content:Object(s.z)(\"Dental History\")},w.createElement(p.a,{className:\"action-button\",iconProps:{iconName:\"Teeth\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=2}})),w.createElement(d.a,{content:Object(s.z)(\"Orthodontic Case Sheet\")},w.createElement(p.a,{className:\"action-button\",iconProps:{iconName:\"GroupedList\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=3}})),w.createElement(d.a,{content:Object(s.z)(\"Orthodontic Album\")},w.createElement(p.a,{className:\"action-button\",iconProps:{iconName:\"TripleColumn\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=4}})),w.createElement(d.a,{content:Object(s.z)(\"Gallery and X-Rays\")},w.createElement(p.a,{className:\"action-button\",iconProps:{iconName:\"PhotoCollection\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=5}})),s.A.currentUser.canViewAppointments?w.createElement(d.a,{content:Object(s.z)(\"Patient Appointments\")},w.createElement(p.a,{className:\"action-button\",iconProps:{iconName:\"Calendar\"},onClick:()=>{this.selectedId=e._id,this.viewWhich=6}})):\"\",w.createElement(d.a,{content:Object(s.z)(\"Delete\")},w.createElement(p.a,{className:\"action-button delete\",iconProps:{iconName:\"Trash\"},onClick:()=>r.cb.deleteModal(e._id),disabled:!this.canEdit}))),className:\"no-label\"},{dataValue:e.isFinished?1/0:e.startedDate,component:w.createElement(\"div\",null,w.createElement(i.j,{text:e.isStarted?Object(l.j)(e.startedDate,r.xb.getSetting(\"date_format\")):\"\",subText:e.isStarted?Object(s.z)(\"Started treatment\"):Object(s.z)(\"Has not started yet\"),size:3,onRenderInitials:()=>w.createElement(h.a,{iconName:\"info\"}),onClick:()=>{},initialsColor:e.isStarted?m.a.teal:m.a.transparent}),w.createElement(\"br\",null),w.createElement(i.j,{text:e.isFinished?Object(l.j)(e.finishedDate,r.xb.getSetting(\"date_format\")):\"\",subText:e.isFinished?Object(s.z)(\"Finished treatment\"):Object(s.z)(\"Has not finished yet\"),size:3,onRenderInitials:()=>w.createElement(h.a,{iconName:\"CheckMark\"}),onClick:()=>{},initialsColor:e.isFinished?m.a.blue:m.a.transparent})),className:\"hidden-xs\"},{dataValue:(t.nextAppointment||{date:0}).date,component:w.createElement(\"div\",null,w.createElement(i.j,{text:t.lastAppointment&&t.lastAppointment.treatment?t.lastAppointment.treatment.type:\"\",subText:t.lastAppointment?Object(l.j)(t.lastAppointment.date,r.xb.getSetting(\"date_format\")):Object(s.z)(\"No last appointment\"),size:3,onRenderInitials:()=>w.createElement(h.a,{iconName:\"Previous\"}),onClick:()=>{},initialsColor:t.lastAppointment?void 0:m.a.transparent}),w.createElement(\"br\",null),w.createElement(i.j,{text:t.nextAppointment&&t.nextAppointment.treatment?t.nextAppointment.treatment.type:\"\",subText:t.nextAppointment?Object(l.j)(t.nextAppointment.date,r.xb.getSetting(\"date_format\")):Object(s.z)(\"No next appointment\"),size:3,onRenderInitials:()=>w.createElement(h.a,{iconName:\"Next\"}),onClick:()=>{},initialsColor:t.nextAppointment?void 0:m.a.transparent})),className:\"hidden-xs\"},{dataValue:t.totalPayments,component:w.createElement(\"div\",null,w.createElement(i.j,{text:r.xb.getSetting(\"currencySymbol\")+t.totalPayments.toString(),subText:Object(s.z)(\"Payments made\"),size:3,onRenderInitials:()=>w.createElement(h.a,{iconName:\"CheckMark\"}),onClick:()=>{},initialsColor:t.totalPayments>0?m.a.darkBlue:m.a.transparent}),w.createElement(\"br\",null),w.createElement(i.j,{text:r.xb.getSetting(\"currencySymbol\")+(t.differenceAmount<0?t.outstandingAmount.toString():t.differenceAmount>0?t.overpaidAmount.toString():\"0\"),subText:t.differenceAmount<0?Object(s.z)(\"Outstanding amount\"):t.differenceAmount>0?Object(s.z)(\"Overpaid amount\"):Object(s.z)(\"No outstanding amount\"),size:3,onRenderInitials:()=>w.createElement(h.a,{iconName:\"Cancel\"}),onClick:()=>{},initialsColor:0!==t.differenceAmount?m.a.darkRed:m.a.transparent})),className:\"hidden-xs\"}]}}),commands:this.canEdit?[{key:\"addNew\",title:\"Add new\",name:Object(s.z)(\"Add new\"),onClick:()=>this.showAdditionPanel=!0,iconProps:{iconName:\"Add\"}}]:[]}),w.createElement(u.a,{isOpen:this.showAdditionPanel,type:b.a.smallFixedFar,closeButtonAriaLabel:\"Close\",isLightDismiss:!0,onDismiss:()=>{this.showAdditionPanel=!1}},w.createElement(\"h4\",null,Object(s.z)(\"Choose patient\")),w.createElement(\"br\",null),w.createElement(i.n,{strict:!0,value:[],options:r.cb.patientsWithNoOrtho.map(e=>({key:e._id,text:e.name})),onAdd:e=>{this.showAdditionPanel=!1;const t=new r.s;t.patientID=e.key,r.cb.list.push(t),this.selectedId=t._id,this.viewWhich=3},placeholder:Object(s.z)(\"Type to select patient\")}),w.createElement(\"br\",null),w.createElement(\"hr\",null),w.createElement(\"h4\",null,\"Or add new patient\"),w.createElement(\"br\",null),w.createElement(E.a,{placeholder:Object(s.z)(\"Patient name\"),value:this.newPatientName,onChange:(e,t)=>this.newPatientName=t}),w.createElement(v.a,{onClick:()=>{const e=new r.t;e.name=this.newPatientName;const t=new r.s;t.patientID=e._id,r.eb.list.push(e),r.cb.list.push(t),this.newPatientName=\"\",this.selectedId=t._id,this.viewWhich=3},iconProps:{iconName:\"add\"},text:Object(s.z)(\"Add new\")})),w.createElement(u.a,{isOpen:!!(this.selectedCase&&this.selectedPatient&&this.viewWhich),type:2===this.viewWhich?b.a.custom:b.a.medium,customWidth:\"100%\",closeButtonAriaLabel:\"Close\",isLightDismiss:!0,onDismiss:()=>{this.selectedId=\"\",this.viewWhich=0},onRenderNavigation:()=>this.selectedCase&&this.selectedPatient?w.createElement(i.k,{className:\"panel-heading\"},w.createElement(i.c,{span:22},w.createElement(i.i,{name:this.selectedPatient.name,secondaryElement:w.createElement(\"span\",null,1===this.viewWhich?Object(s.z)(\"Patient Details\"):\"\",2===this.viewWhich?Object(s.z)(\"Dental History\"):\"\",3===this.viewWhich?Object(s.z)(\"Orthodontic Case Sheet\"):\"\",4===this.viewWhich?Object(s.z)(\"Orthodontic Album\"):\"\",5===this.viewWhich?Object(s.z)(\"Gallery and X-Rays\"):\"\",6===this.viewWhich?Object(s.z)(\"Patient Appointments\"):\"\"),size:3})),w.createElement(i.c,{span:2,className:\"close\"},w.createElement(p.a,{iconProps:{iconName:\"cancel\"},onClick:()=>{this.selectedId=\"\",this.viewWhich=0}}))):w.createElement(\"div\",null)},w.createElement(\"div\",null,this.selectedCase&&this.selectedPatient?w.createElement(\"div\",{className:\"ortho-single-component\"},1===this.viewWhich?w.createElement(i.a,{key:\"patient-detail\",loader:()=>a.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(8)]).then(n.bind(null,251))).PatientDetailsPanel;return w.createElement(e,{patient:this.selectedPatient})})}):\"\",2===this.viewWhich&&w.createElement(\"div\",null,w.createElement(\"div\",{style:{width:\"100%\"}},w.createElement(\"div\",{style:{width:\"65%\",padding:\"8px\",marginLeft:\"auto\"}},w.createElement(y.a,{patient:this.selectedPatient})),w.createElement(\"div\",{style:{width:\"100%\",borderTop:\"1px solid #999\"}},w.createElement(P.a,{patient:this.selectedPatient})))),3===this.viewWhich?w.createElement(i.a,{key:\"ortho-case-sheet\",loader:()=>a.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(7)]).then(n.bind(null,524))).OrthoCaseSheetPanel;return this.selectedCase?w.createElement(e,{orthoCase:this.selectedCase}):w.createElement(\"div\",null)})}):\"\",4===this.viewWhich?w.createElement(i.a,{key:\"ortho-records\",loader:()=>a.b(this,void 0,void 0,function*(){const e=(yield Promise.all([n.e(0),n.e(14)]).then(n.bind(null,525))).OrthoRecordsPanel;return this.selectedCase?w.createElement(e,{orthoCase:this.selectedCase}):w.createElement(\"div\",null)})}):\"\",5===this.viewWhich?w.createElement(i.a,{key:\"ortho-gallery\",loader:()=>a.b(this,void 0,void 0,function*(){const e=(yield n.e(40).then(n.bind(null,526))).OrthoGalleryPanel;return this.selectedCase?w.createElement(e,{orthoCase:this.selectedCase}):w.createElement(\"div\",null)})}):\"\",6===this.viewWhich?w.createElement(r.u,{patient:this.selectedPatient}):\"\"):\"\")))}};a.c([o.k],C.prototype,\"showAdditionPanel\",void 0),a.c([o.k],C.prototype,\"newPatientName\",void 0),a.c([o.k],C.prototype,\"selectedId\",void 0),a.c([o.k],C.prototype,\"viewWhich\",void 0),a.c([o.d],C.prototype,\"selectedCase\",null),a.c([o.d],C.prototype,\"selectedPatient\",null),a.c([o.d],C.prototype,\"canEdit\",null),C=a.c([c.a],C)}}]);","extractedComments":[]}